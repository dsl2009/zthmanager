webpackJsonp([1],{"+LnL":function(e,t){},"9qek":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},r,!1,function(e){a("+LnL")},null,null).exports,n=a("/ocq"),s={data:function(){return{logining:!1,ruleForm2:{username:"",password:""},rules2:{username:[{required:!0,message:"please enter your account",trigger:"blur"}],password:[{required:!0,message:"enter your password",trigger:"blur"}]},checked:!1}},methods:{handleSubmit:function(e){var t=this;this.$refs.ruleForm2.validate(function(e){if(e){var a=t;a.logining=!0,t.axios.get("/api/login",{params:{user_name:t.ruleForm2.username,password:t.ruleForm2.password}}).then(function(e){var t=e.data;200===t.status?(a.logining=!1,a.$router.push({name:"Manager",params:{company_name:t.data.company_name,company_id:t.data.company_id}})):(a.logining=!1,a.$alert("用户名或者密码错误!","警告",{confirmButtonText:"ok"}))}).catch(function(e){a.logining=!1,a.$alert("网络错误","警告",{confirmButtonText:"ok"}),console.log("come"),console.log(e)})}})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,i,!1,function(e){a("9qek")},"data-v-1945a15a",null).exports,c={data:function(){return{company_name:"",company_id:"",tableData:[],search:"",dialogFormVisible:!1,formLabelWidth:"120px",dialogVisible:!1,tobeDelete:"",form:{user_name:"",user_auth:!0,user_tel:""},org_form:{user_name:"",user_auth:!0,user_tel:""}}},methods:{initData:function(){var e=this;this.axios.get("/api/get_all_user",{params:{company_id:this.company_id}}).then(function(t){console.log(t.data.data),e.tableData=t.data.data}).catch(function(e){console.log("come"),console.log(e)})},handleEdit:function(e,t){console.log(e,t),this.dialogFormVisible=!0,this.form=t},handleDelete:function(e,t){this.dialogVisible=!0,this.tobeDelete=t.user_tel},change:function(e,t){console.log(e,t.status)},addData:function(){this.dialogFormVisible=!0,this.form=this.org_form},updateUser:function(){var e=this;this.dialogFormVisible=!1;var t=this;this.$refs.updateForm.validate(function(a){a&&(void 0===e.form.id?(console.log("add"),e.axios.get("/api/add_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel}}).then(function(e){200===e.data.status&&t.initData(),console.log(e.data)}).catch(function(e){console.log(e)})):(console.log("update"),e.axios.get("/api/update_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel,user_id:e.form.id}}).then(function(e){200===e.data.status&&t.initData()}).catch(function(e){console.log(e)})))})},deleteUser:function(){console.log("ss"),this.dialogVisible=!1;var e=this;this.axios.get("/api/delete_user",{params:{user_tel:this.tobeDelete}}).then(function(t){200===t.data.status&&e.initData()}).catch(function(e){console.log(e)})}},created:function(){console.log(this.$route.params),this.company_name=this.$route.params.company_name,this.company_id=this.$route.params.company_id,this.initData()}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"收货地址",visible:e.dialogFormVisible,width:"30%","show-close":!1}},[a("el-form",{ref:"updateForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"管理员名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_tel,callback:function(t){e.$set(e.form,"user_tel",t)},expression:"form.user_tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理权限","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.user_auth,callback:function(t){e.$set(e.form,"user_auth",t)},expression:"form.user_auth"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("确定删除吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("确 定")])],1)]),e._v(" "),a("el-col",[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"title-expand"},[a("h2",[e._v(e._s(e.company_name))])])]),e._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.addData}},[e._v("添加管理员")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.user_tel.toLowerCase().includes(e.search.toLowerCase())})}},[a("el-table-column",{attrs:{label:"添加日期",prop:"add_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者名字",prop:"user_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者电话",prop:"user_tel"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可以修改设备",prop:"user_auth"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!0},model:{value:t.row.user_auth,callback:function(a){e.$set(t.row,"user_auth",a)},expression:"scope.row.user_auth"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入电话搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(c,m,!1,null,null,null).exports;o.default.use(n.a);var p=new n.a({routes:[{path:"/",name:"Login",component:u},{path:"/manager",name:"Manager",component:d}]}),f=a("zL8q"),_=a.n(f),h=(a("tvR6"),a("mtWM")),g=a.n(h),v=a("Rf8U"),b=a.n(v);o.default.use(b.a,g.a),o.default.use(_.a),new o.default({el:"#app",router:p,components:{App:l},template:"<App/>"})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0750222ea84b5de8e390.js.map