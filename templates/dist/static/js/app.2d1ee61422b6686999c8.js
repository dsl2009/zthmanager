webpackJsonp([1],{"2beN":function(e,t){},AqNN:function(e,t){},B48f:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},l,!1,function(e){a("SAzn")},null,null).exports,i=a("/ocq"),r={data:function(){return{logining:!1,ruleForm2:{username:"",password:""},rules2:{username:[{required:!0,message:"please enter your account",trigger:"blur"}],password:[{required:!0,message:"enter your password",trigger:"blur"}]},checked:!1}},methods:{handleSubmit:function(e){var t=this;this.$refs.ruleForm2.validate(function(e){if(e){var a=t;a.logining=!0,t.axios.get("/api/login",{params:{user_name:t.ruleForm2.username,password:t.ruleForm2.password}}).then(function(e){var t=e.data;200===t.status?(a.logining=!1,sessionStorage.setItem("company_name",t.data.company_name),sessionStorage.setItem("company_id",t.data.company_id),a.$router.push({name:"TabManager",params:{company_name:t.data.company_name,company_id:t.data.company_id}})):(a.logining=!1,a.$alert("用户名或者密码错误!","警告",{confirmButtonText:"ok"}))}).catch(function(e){a.logining=!1,a.$alert("网络错误","警告",{confirmButtonText:"ok"}),console.log("come"),console.log(e)})}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(e){a("2beN")},"data-v-25da506c",null).exports,u={data:function(){return{company_name:"",company_id:"",tableData:[],search:"",dialogFormVisible:!1,formLabelWidth:"140px",dialogVisible:!1,tobeDelete:"",form:{user_name:"",user_auth:!0,user_tel:""},org_form:{user_name:"",user_auth:!0,user_tel:""},change_id:"",delete_id:""}},methods:{initData:function(){var e=this;this.axios.get("/api/get_all_user",{params:{company_id:this.company_id}}).then(function(t){console.log(t.data.data),e.tableData=t.data.data}).catch(function(e){console.log("come"),console.log(e)})},handleEdit:function(e,t){console.log(e,t),this.dialogFormVisible=!0,this.form=t},handleDelete:function(e,t){this.dialogVisible=!0,this.tobeDelete=t.user_tel,this.delete_id=t.id},change:function(e,t){console.log(e,t.status)},addData:function(){this.dialogFormVisible=!0,this.form=this.org_form},updateUser:function(){var e=this;this.dialogFormVisible=!1;var t=this;this.$refs.updateForm.validate(function(a){a&&(void 0===e.form.id?(console.log("add"),e.axios.get("/api/add_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel}}).then(function(e){200===e.data.status&&t.initData(),console.log(e.data)}).catch(function(e){console.log(e)})):(console.log("update"),e.axios.get("/api/update_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel,user_id:e.form.id}}).then(function(e){200===e.data.status&&t.initData()}).catch(function(e){console.log(e)})))})},deleteUser:function(){console.log("ss"),this.dialogVisible=!1;var e=this;console.log(e.change_id),e.change_id===e.delete_id||""===e.change_id?e.$message.error("不能把设备转交给要删除的人！"):this.axios.get("/api/delete_user",{params:{delete_id:this.delete_id,change_id:this.change_id}}).then(function(t){200===t.data.status&&(e.change_id="",e.initData())}).catch(function(e){console.log(e)})}},created:function(){this.company_name=sessionStorage.getItem("company_name"),this.company_id=sessionStorage.getItem("company_id"),this.initData()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加管理员",visible:e.dialogFormVisible,width:"30%","show-close":!1}},[a("el-form",{ref:"updateForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"管理员名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_tel,callback:function(t){e.$set(e.form,"user_tel",t)},expression:"form.user_tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理权限","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.user_auth,callback:function(t){e.$set(e.form,"user_auth",t)},expression:"form.user_auth"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"确定删除吗？",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"deleteForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"请选择设备承接人","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.change_id,callback:function(t){e.change_id=t},expression:"change_id"}},e._l(e.tableData,function(e){return a("el-option",{key:e.id,attrs:{label:e.user_name,value:e.id}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-col",[a("el-row",{staticStyle:{"background-color":"#ffffff",margin:"0px",border:"1px solid #eee"},attrs:{gutter:24}},[a("el-col",{attrs:{span:1,offset:21}},[a("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.addData}},[e._v("添加管理员")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.user_tel.toLowerCase().includes(e.search.toLowerCase())})}},[a("el-table-column",{attrs:{label:"添加日期",prop:"add_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者名字",prop:"user_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者电话",prop:"user_tel"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可以修改设备",prop:"user_auth"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!0},model:{value:t.row.user_auth,callback:function(a){e.$set(t.row,"user_auth",a)},expression:"scope.row.user_auth"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入电话搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(u,d,!1,null,null,null).exports,f={name:"TabManager",data:function(){return{is_add:!0,company_name:""}},methods:{handleSelect:function(e,t){console.log(e,t)},onSelectImage:function(e){console.log(e)}},created:function(){this.company_name=sessionStorage.getItem("company_name")}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",width:"100%",border:"1px solid #eee"}},[a("el-header",{staticClass:"user-header"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("h2",{staticStyle:{color:"#f2f2f2"}},[e._v(e._s(e.company_name))])])],1)],1),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":"$route.path"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"/manager"}},[a("i",{staticClass:"el-icon-picture"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("人员管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/device"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("设备信息")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/person"}},[a("i",{staticClass:"el-icon-document"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的信息")])])],1)],1),e._v(" "),a("el-main",{staticClass:"main-content"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(f,_,!1,function(e){a("smWq")},"data-v-754f3b35",null).exports,h={name:"Device",data:function(){return{company_id:"",tableData:[]}},mounted:function(){this.drawLine()},methods:{initData:function(){var e=this;this.axios.get("/api/get_devices",{params:{company_id:this.company_id}}).then(function(t){e.tableData=t.data}).catch(function(e){console.log("come"),console.log(e)})},drawLine:function(e,t){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:e},tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1}},visualMap:{top:24,x:"center",orient:"horizontal",textStyle:{color:"#000"},pieces:[{min:41,max:106,label:"正常运行",color:"#B5C334"},{min:10.9,max:41,label:"故障状态",color:"#FF4444"},{min:0,max:10.9,label:"关闭状态",color:"#00FF44"}],outOfRange:{color:"#999"}},series:[{name:"状态",type:"line",showSymbol:!1,hoverAnimation:!1,data:t,itemStyle:{normal:{color:function(e){return 42===e.data[1]||74===e.data[1]||106===e.data[1]?"#B5C334":e.data[1]<11?"#00FF44":"#FF4444"}}}}]})},drawBar:function(e,t,a){this.$echarts.init(document.getElementById("myBar")).setOption({title:{text:e},tooltip:{trigger:"axis"},xAxis:{type:"category",data:a},yAxis:{type:"value"},series:[{data:t,type:"bar"}]})},drawRow:function(e,t,a,o){if(void 0===e.online){var l=this;this.axios.get("/api/get_history",{params:{dev_mac:e.dev_mac}}).then(function(t){console.log(t.data),l.drawLine(e.dev_name,t.data.data),l.drawBar(e.dev_name,t.data.times,t.data.labels)}).catch(function(e){console.log("come"),console.log(e)})}}},created:function(){this.company_name=sessionStorage.getItem("company_name"),this.company_id=sessionStorage.getItem("company_id"),this.initData()}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:6}},[t("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:this.tableData,"row-key":"dev_mac",border:"","default-expand-all":"","tree-props":{children:"devices",hasChildren:"hasChildren"}},on:{"cell-click":this.drawRow}},[t("el-table-column",{attrs:{prop:"dev_name",label:"设备名称",width:"300px"}})],1)],1),this._v(" "),t("el-col",{attrs:{span:18}},[t("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart"}}),this._v(" "),t("div",{style:{width:"100%",height:"300px"},attrs:{id:"myBar"}})])],1)},staticRenderFns:[]};var b=a("VU/8")(h,g,!1,function(e){a("B48f")},"data-v-014efcd6",null).exports,v={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var y=a("VU/8")({name:"Personal"},v,!1,function(e){a("AqNN")},"data-v-79e7d6d2",null).exports,w={data:function(){return{company_name:"",company_id:"",tableData:[],search:"",dialogFormVisible:!1,formLabelWidth:"140px",dialogVisible:!1,tobeDelete:"",form:{user_name:"",user_tel:"",user_login_name:"",user_login_password:""},org_form:{user_name:"",user_tel:"",user_login_name:"",user_login_password:""},change_id:"",delete_id:""}},methods:{initData:function(){var e=this;this.axios.get("/api/get_kehu",{params:{auth:""}}).then(function(t){console.log(t.data.data),e.tableData=t.data.data}).catch(function(e){console.log("come"),console.log(e)})},handleEdit:function(e,t){console.log(e,t),this.dialogFormVisible=!0,this.form=t},handleDelete:function(e,t){this.dialogVisible=!1,this.tobeDelete=t.user_tel,this.delete_id=t.id},change:function(e,t){console.log(e,t.status)},addData:function(){this.dialogFormVisible=!0,this.form=this.org_form},updateUser:function(){var e=this;this.dialogFormVisible=!1;var t=this;this.$refs.updateForm.validate(function(a){a&&(void 0===e.form.id?(console.log("add"),e.axios.get("/api/add_kehu",{params:{user_name:e.form.user_name,user_tel:e.form.user_tel,user_login_name:e.form.user_login_name,user_login_password:e.form.user_login_password,user_id:e.form.id}}).then(function(e){200===e.data.status&&t.initData(),console.log(e.data)}).catch(function(e){console.log(e)})):(console.log("update"),e.axios.get("/api/update_user",{params:{user_name:e.form.user_name,user_tel:e.form.user_tel,user_login_name:e.form.user_login_name,user_login_password:e.form.user_login_password}}).then(function(e){200===e.data.status&&t.initData()}).catch(function(e){console.log(e)})))})},deleteUser:function(){console.log("ss"),this.dialogVisible=!1;var e=this;e.change_id===e.delete_id?e.$message.error("不能把设备转交给要删除的人！"):this.axios.get("/api/delete_user",{params:{delete_id:this.delete_id,change_id:this.change_id}}).then(function(t){200===t.data.status&&e.initData()}).catch(function(e){console.log(e)})}},created:function(){this.initData()}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加客户",visible:e.dialogFormVisible,width:"30%","show-close":!1}},[a("el-form",{ref:"updateForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"客户名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_tel,callback:function(t){e.$set(e.form,"user_tel",t)},expression:"form.user_tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户登录名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_login_name,callback:function(t){e.$set(e.form,"user_login_name",t)},expression:"form.user_login_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户登录密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_login_password,callback:function(t){e.$set(e.form,"user_login_password",t)},expression:"form.user_login_password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"确定删除吗？",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"deleteForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"请选择设备承接人","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.change_id,callback:function(t){e.change_id=t},expression:"change_id"}},e._l(e.tableData,function(e){return a("el-option",{key:e.id,attrs:{label:e.user_name,value:e.id}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-col",[a("el-row",{staticStyle:{"background-color":"#ffffff",margin:"0px",border:"1px solid #eee"},attrs:{gutter:24}},[a("el-col",{attrs:{span:1,offset:21}},[a("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.addData}},[e._v("添加客户")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.user_tel.toLowerCase().includes(e.search.toLowerCase())})}},[a("el-table-column",{attrs:{label:"添加日期",prop:"add_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户名字",prop:"user_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户电话",prop:"user_tel"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户登录名",prop:"user_login_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户登录密码",prop:"user_login_password"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入电话搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},k=a("VU/8")(w,x,!1,null,null,null).exports;o.default.use(i.a);var F=new i.a({routes:[{path:"/",name:"Login",component:c},{path:"/admin",name:"AdminManager",component:k},{path:"/ztu_manager",name:"TabManager",component:p,children:[{path:"/manager",name:"Manager",component:m},{path:"/device",name:"Device",component:b},{path:"/person",name:"Personal",component:y}]}]}),D=a("zL8q"),$=a.n(D),S=(a("tvR6"),a("mtWM")),V=a.n(S),C=a("Rf8U"),L=a.n(C),U=a("XLwt"),W=a.n(U);o.default.prototype.$echarts=W.a,o.default.use(L.a,V.a),o.default.use($.a),new o.default({el:"#app",router:F,components:{App:n},template:"<App/>"})},SAzn:function(e,t){},smWq:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2d1ee61422b6686999c8.js.map