webpackJsonp([1],{"2beN":function(e,t){},AqNN:function(e,t){},GbNz:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},n,!1,function(e){a("SAzn")},null,null).exports,i=a("/ocq"),s={data:function(){return{logining:!1,ruleForm2:{username:"",password:""},rules2:{username:[{required:!0,message:"please enter your account",trigger:"blur"}],password:[{required:!0,message:"enter your password",trigger:"blur"}]},checked:!1}},methods:{handleSubmit:function(e){var t=this;this.$refs.ruleForm2.validate(function(e){if(e){var a=t;a.logining=!0,t.axios.get("/api/login",{params:{user_name:t.ruleForm2.username,password:t.ruleForm2.password}}).then(function(e){var t=e.data;200===t.status?(a.logining=!1,sessionStorage.setItem("company_name",t.data.company_name),sessionStorage.setItem("company_id",t.data.company_id),a.$router.push({name:"TabManager",params:{company_name:t.data.company_name,company_id:t.data.company_id}})):(a.logining=!1,a.$alert("用户名或者密码错误!","警告",{confirmButtonText:"ok"}))}).catch(function(e){a.logining=!1,a.$alert("网络错误","警告",{confirmButtonText:"ok"}),console.log("come"),console.log(e)})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-page",attrs:{model:e.ruleForm2,rules:e.rules2,"status-icon":"","label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"用户名"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("2beN")},"data-v-25da506c",null).exports,u={data:function(){return{company_name:"",company_id:"",tableData:[],search:"",dialogFormVisible:!1,formLabelWidth:"120px",dialogVisible:!1,tobeDelete:"",form:{user_name:"",user_auth:!0,user_tel:""},org_form:{user_name:"",user_auth:!0,user_tel:""}}},methods:{initData:function(){var e=this;this.axios.get("/api/get_all_user",{params:{company_id:this.company_id}}).then(function(t){console.log(t.data.data),e.tableData=t.data.data}).catch(function(e){console.log("come"),console.log(e)})},handleEdit:function(e,t){console.log(e,t),this.dialogFormVisible=!0,this.form=t},handleDelete:function(e,t){this.dialogVisible=!0,this.tobeDelete=t.user_tel},change:function(e,t){console.log(e,t.status)},addData:function(){this.dialogFormVisible=!0,this.form=this.org_form},updateUser:function(){var e=this;this.dialogFormVisible=!1;var t=this;this.$refs.updateForm.validate(function(a){a&&(void 0===e.form.id?(console.log("add"),e.axios.get("/api/add_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel}}).then(function(e){200===e.data.status&&t.initData(),console.log(e.data)}).catch(function(e){console.log(e)})):(console.log("update"),e.axios.get("/api/update_user",{params:{user_name:e.form.user_name,user_auth:e.form.user_auth,user_tel:e.form.user_tel,user_id:e.form.id}}).then(function(e){200===e.data.status&&t.initData()}).catch(function(e){console.log(e)})))})},deleteUser:function(){console.log("ss"),this.dialogVisible=!1;var e=this;this.axios.get("/api/delete_user",{params:{user_tel:this.tobeDelete}}).then(function(t){200===t.data.status&&e.initData()}).catch(function(e){console.log(e)})}},created:function(){this.company_name=sessionStorage.getItem("company_name"),this.company_id=sessionStorage.getItem("company_id"),this.initData()}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"收货地址",visible:e.dialogFormVisible,width:"30%","show-close":!1}},[a("el-form",{ref:"updateForm",attrs:{model:e.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"管理员名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理员电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_tel,callback:function(t){e.$set(e.form,"user_tel",t)},expression:"form.user_tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理权限","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.user_auth,callback:function(t){e.$set(e.form,"user_auth",t)},expression:"form.user_auth"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("确定删除吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("确 定")])],1)]),e._v(" "),a("el-col",[a("el-row",{staticStyle:{"background-color":"#ffffff",margin:"0px",border:"1px solid #eee"},attrs:{gutter:24}},[a("el-col",{attrs:{span:1,offset:21}},[a("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.addData}},[e._v("添加管理员")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.user_tel.toLowerCase().includes(e.search.toLowerCase())})}},[a("el-table-column",{attrs:{label:"添加日期",prop:"add_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者名字",prop:"user_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者电话",prop:"user_tel"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否可以修改设备",prop:"user_auth"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!0},model:{value:t.row.user_auth,callback:function(a){e.$set(t.row,"user_auth",a)},expression:"scope.row.user_auth"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入电话搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(u,m,!1,null,null,null).exports,p={name:"TabManager",data:function(){return{is_add:!0,company_name:""}},methods:{handleSelect:function(e,t){console.log(e,t)},onSelectImage:function(e){console.log(e)}},created:function(){this.company_name=sessionStorage.getItem("company_name")}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",width:"100%",border:"1px solid #eee"}},[a("el-header",{staticClass:"user-header"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("h2",{staticStyle:{color:"#f2f2f2"}},[e._v(e._s(e.company_name))])])],1)],1),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":"$route.path"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"/manager"}},[a("i",{staticClass:"el-icon-picture"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("人员管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/device"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("设备信息")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/person"}},[a("i",{staticClass:"el-icon-document"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的信息")])])],1)],1),e._v(" "),a("el-main",{staticClass:"main-content"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,f,!1,function(e){a("smWq")},"data-v-754f3b35",null).exports,_={name:"Device",data:function(){return{company_id:"",tableData:[]}},mounted:function(){this.drawLine()},methods:{initData:function(){var e=this;this.axios.get("/api/get_devices",{params:{company_id:this.company_id}}).then(function(t){e.tableData=t.data}).catch(function(e){console.log("come"),console.log(e)})},drawLine:function(e,t){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:e},tooltip:{trigger:"axis"},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1}},visualMap:{top:24,x:"center",orient:"horizontal",textStyle:{color:"#000"},pieces:[{min:31,max:96,label:"正常运行",color:"#B5C334"},{min:0,max:21,label:"故障状态",color:"#FF4444"}],outOfRange:{color:"#999"}},series:[{name:"状态",type:"bar",showSymbol:!1,hoverAnimation:!1,data:t,itemStyle:{normal:{color:function(e){return console.log(e.data),32===e.data[1]||64===e.data[1]||96===e.data[1]?"#B5C334":"#FF4444"}}}}]})},drawRow:function(e,t,a,o){if(void 0===e.online){var n=this;this.axios.get("/api/get_history",{params:{dev_mac:e.dev_mac}}).then(function(t){console.log(t.data),n.drawLine(e.dev_name,t.data.data)}).catch(function(e){console.log("come"),console.log(e)})}}},created:function(){this.company_name=sessionStorage.getItem("company_name"),this.company_id=sessionStorage.getItem("company_id"),this.initData()}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:6}},[t("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:this.tableData,"row-key":"dev_mac",border:"","default-expand-all":"","tree-props":{children:"devices",hasChildren:"hasChildren"}},on:{"cell-click":this.drawRow}},[t("el-table-column",{attrs:{prop:"dev_name",label:"设备名称",width:"300px"}})],1)],1),this._v(" "),t("el-col",{attrs:{span:18}},[t("div",{style:{width:"100%",height:"500px"},attrs:{id:"myChart"}})])],1)},staticRenderFns:[]};var v=a("VU/8")(_,g,!1,function(e){a("GbNz")},"data-v-1b5a301c",null).exports,b={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var y=a("VU/8")({name:"Personal"},b,!1,function(e){a("AqNN")},"data-v-79e7d6d2",null).exports;o.default.use(i.a);var w=new i.a({routes:[{path:"/",name:"Login",component:c},{path:"/ztu_manager",name:"TabManager",component:h,children:[{path:"/manager",name:"Manager",component:d},{path:"/device",name:"Device",component:v},{path:"/person",name:"Personal",component:y}]}]}),x=a("zL8q"),F=a.n(x),S=(a("tvR6"),a("mtWM")),k=a.n(S),D=a("Rf8U"),$=a.n(D),C=a("XLwt"),V=a.n(C);o.default.prototype.$echarts=V.a,o.default.use($.a,k.a),o.default.use(F.a),new o.default({el:"#app",router:w,components:{App:r},template:"<App/>"})},SAzn:function(e,t){},smWq:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.707b33f0c042d4bd0d7b.js.map